; Test boundness analysis
; boundness returns three values: free-vars, bound-vars, boundness-array

; Helper to print all three values
{ /boundness /bound /free
  "free=" print free write
  " bound=" print bound write
  " boundness=" print boundness writeln!
} /show

; Test 1: {x /x x}
'{x /x x} boundness! show!

; Test 2: {/x [x] x}
'{/x [x] x} boundness! show!

; Test 3: {/x {x} x}
'{/x {x} x} boundness! show!

; Test 4: {x /x [/y x y] x y}
'{x /x [/y x y] x y} boundness! show!

; Test 5: {x /x {/y x y} x y}
'{x /x {/y x y} x y} boundness! show!

; Additional edge cases

; Empty function
'{} boundness! show!

; Single binder
'{/x} boundness! show!

; Deeply nested
'{/x {/y {x y}}} boundness! show!

; Multiple uses of same variable
'{/x x x x} boundness! show!

; Shadowing within generator
'{/x [/x x] x} boundness! show!

; Free before bound, closure after
'{x /x {x} x} boundness! show!

; Generator with free var
'{/x x {x} x} boundness! show!

; Generator shadows outer
'{x [/x x] x} boundness! show!
