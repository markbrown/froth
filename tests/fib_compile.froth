; Define fib using Y-combinator style
{/self /n
  n 2 < {n} {
    n 1 - self self!
    n 2 - self self!
    +
  } ?!
} /fib-impl

{fib-impl fib-impl!} /fib

; Test interpreted version
"interpreted: " print
[1 1 10 fib!] println!

; Compile fib (should also compile fib-impl)
0 env 'fib compile! /new-env /addr
new-env restore

; Test compiled version
"compiled: " print
[1 1 10 fib!] println!

"done" println!
