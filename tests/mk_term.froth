; Test mkFunc and mkGen operators

; Basic mkFunc - create function from array of terms
"mkFunc basic: " print
[ 1 wrap 2 wrap '+ ] mkFunc writeln!

; Basic mkGen - create generator from array of terms
"mkGen basic: " print
[ 1 wrap 2 wrap 3 wrap ] mkGen writeln!

; Empty function
"empty func: " print
[ ] mkFunc writeln!

; Empty generator
"empty gen: " print
[ ] mkGen writeln!

; Length of constructed function
"func length: " print
[ 'a 'b 'c ] mkFunc # println!

; Length of constructed generator
"gen length: " print
[ 'x 'y ] mkGen # println!

; Access terms in constructed function
"func term 0: " print
[ 'foo 'bar ] mkFunc 0 @ writeln!

; Access terms in constructed generator
"gen term 1: " print
[ 'one 'two ] mkGen 1 @ writeln!

; Round-trip: decompose and reconstruct function
"round-trip func: " print
'{ a b c } /f
[ 0 f # { /i f i @ i 1 + } times-loop! drop! ] mkFunc writeln!

; Round-trip: decompose and reconstruct generator
"round-trip gen: " print
'[ x y z ] /g
[ 0 g # { /i g i @ i 1 + } times-loop! drop! ] mkGen writeln!

; Execute constructed function via close
"execute: " print
$ [ 1 wrap 2 wrap '+ ] mkFunc close ! println!

; Execute with variable
"with var: " print
10 /x
$ x 'x : [ 'x 5 wrap '+ ] mkFunc close ! println!
