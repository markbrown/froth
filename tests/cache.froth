; Test cache module

; Test empty cache
cache-empty! /c
c 'x {1} cache-get! println!
; Expected: 1 (not found)

; Create closures to test with
{1} /f1
{2} /f2
{3} /g1

; Test cache-set and cache-get
c 'f f1 "compiled-f1" cache-set! /c
c 'f f1 cache-get! print println!
; Expected: compiled-f10 (found)

; Test different closureval under same ident
c 'f f2 cache-get! println!
; Expected: 1 (not found - different closure)

; Test adding second closureval under same ident
c 'f f2 "compiled-f2" cache-set! /c
c 'f f2 cache-get! print println!
; Expected: compiled-f20

; Original still there
c 'f f1 cache-get! print println!
; Expected: compiled-f10

; Test different ident
c 'g g1 cache-get! println!
; Expected: 1 (not found)

c 'g g1 "compiled-g1" cache-set! /c
c 'g g1 cache-get! print println!
; Expected: compiled-g10
