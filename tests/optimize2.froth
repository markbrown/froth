; Test optimize function

; Create a closure with extra bindings that will be removed
1 /unused1
2 /unused2
3 /used
{ used 10 * } /f

; Optimize a single closure
f optimize! /opt-f
opt-f! println!

; Create array of closures
[ f f ] optimize! /arr
arr 0 @! println!
arr 1 @! println!

; Create map with closure values
$ f 'func : optimize! /m
m 'func @! println!

; Nested: array containing map containing closure
[ $ f 'inner : ] optimize! /nested
nested 0 @ 'inner @! println!
