; Test preflight checks for static analysis

; Helper to show pass/fail
{ { "PASS" } { "FAIL" } ?! println! } /show

; Safe functions should pass (return 0)
"Simple identifier: " print '{ x } preflight! show!
"Bound variable: " print '{ /x x } preflight! show!
"Multiple vars: " print '{ /x x y } preflight! show!
"Nested function: " print '{ /x { x } } preflight! show!
"Generator: " print '{ [ x ] } preflight! show!
"Quoted term: " print '{ 'x } preflight! show!
"Apply: " print '{ f! } preflight! show!
"Complex nested: " print '{ /a { /b { a b c } } } preflight! show!

; Functions with env should fail (return 1)
"env direct: " print '{ env } preflight! not! show!
"env nested: " print '{ /x { env } } preflight! not! show!
"env in generator: " print '{ [ env ] } preflight! not! show!

; Functions with import should fail (return 1)
"import direct: " print '{ "foo" import } preflight! not! show!
"import nested: " print '{ { "foo" import } } preflight! not! show!
