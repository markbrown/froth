; state.froth - Compiler state encapsulation
;
; The compiler state is a map with three fields:
;   'cache    - compilation cache (from cache-empty)
;   'code-map - tree23 for function deduplication
;   'addr     - next available bytecode address

; empty-state: ( -- state )
; Create an initial compiler state with empty cache, empty code-map, and addr 0.
['cache-empty 'tree-empty]
{ $ cache-empty! 'cache : tree-empty! 'code-map : 0 'addr : }
def-fn! /empty-state
