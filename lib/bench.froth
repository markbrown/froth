; lib/bench.froth
; Benchmarking utilities

; bench: (closure n -- ticks)
; Execute closure n times and return elapsed clock ticks.
; Values produced by the closure are discarded after all iterations.
{ /n /f
  time /start
  [
    { /self /n
      n 0 > {
        f!
        n 1 - self self!
      } { } ?!
    } /loop
    n loop loop!
    stack /discard
  ] /discard
  time start -
} /bench
